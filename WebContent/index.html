<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>项目说明</title>
<style>
<!--
body {
	font: normal 14px Helvetica, Microsoft Yahei, sans-serif;
}

pre {
	background: #f5f5f5;
	border: 1px solid #e5e5e5;
	padding: 0 10px;
}

b {
	color: red;
}

h2 {
	border-top: 1px dotted #d5d5d5;
	padding-top: 14px;
}
-->
</style>
</head>
<body>
	<h1>Servlet演示案例(简单范例)</h1>
	<ol>
		<li><a href="app">实例：servlet动态生成页面</a></li>
		<li><a href="#nav1">动手：编写简单servlet</a>
			<ul>
				<li><a href="#nav1-1">编写AppController.java</a></li>
				<li><a href="#nav1-2">在web.xml中部署AppController</a></li>
				<li><a href="#nav1-3">通过浏览器访问AppController</a></li>				
			</ul>
		</li>
		<li><a href="#nav2">新问题：徒手编写html页面的难度</a></li>
	</ol>
	<h2 id="nav1">动手：编写servlet</h2>
	<h3 id="nav1-1">编写AppController.java</h3>
	<p>
		源码位置：<em>webmodel/src/ceit/web/Appcontroller.java</em>
	</p>
	<pre>
package com.ceit.web;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class AppController extends HttpServlet {

	private static final long serialVersionUID = 1L;

	public void service(HttpServletRequest request, HttpServletResponse response)
			throws IOException, ServletException {
		
		response.setContentType("text/html;charset=utf-8");//<b>必须</b>，规定输出文件类型和字符集
		PrintWriter pw = response.getWriter();//获得输出流
		pw.println("&lt;h1&gt;你好！世界&lt;/h1&gt;");//在输出流中写入数据
		pw.println("&lt;p&gt;这个页面很简单，但正如大家所见，它不是预先写好并以html文本的形式存放于服务器&lt;/p&gt;");
		pw.println("&lt;p&gt;而是由servlet生成的，每发送一次请求就生成一次，这就是所谓的这就是所谓的&lt;b&gt;动态&lt;/b&gt;页面。&lt;/p&gt;);
		pw.println("&lt;p&gt;这两种方式的区别就像食堂的大锅菜和小炒一样，后者可以根据特定情况进行处理,获得不同的效果。&lt;/p&gt;");
		pw.println("&lt;p&gt;例如，以下的页面生成时间就是实时获得，不可能预先写好&lt;/p&gt;");
		pw.println("&lt;p&gt;本页面生成时间为："+sdf.format(new Date())+"&lt;/p&gt;");
		pw.close();//<b>必须</b>，关闭输出流
		
	}
}
	</pre>
	<h3 id="nav1-2">在web.xml中部署AppController，将url路径跟具体的类关联起来</h3>
	<ul>
		<li>两个&lt;servlet-name&gt;中内容必须完全一致</li>
		<li>&lt;url-pattern&gt;中的路径以"/开头"</li>
	</ul>
	<p>
		源码位置：<em>webmodel/WebContent/WEB-INF/web.xml</em>
	</p>
	<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://java.sun.com/xml/ns/javaee"
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
	id="WebApp_ID" version="3.0"&gt;
  &lt;display-name&gt;webmodel&lt;/display-name&gt;
  &lt;welcome-file-list&gt;
    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
  &lt;/welcome-file-list&gt;
  &lt;servlet&gt;
  	&lt;servlet-name&gt;Application Controller 0.1&lt;/servlet-name&gt;
  	&lt;servlet-class&gt;com.ceit.web.AppController&lt;/servlet-class&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
  	&lt;servlet-name&gt;Application Controller 0.1&lt;/servlet-name&gt;
  	&lt;url-pattern&gt;/app&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
&lt;/web-app&gt;	
	</pre>
	<h3 id="nav1-3">在浏览器上通过配置的'/app'路径访问AppController</h3>
	<ul>
		<li>假设端口为默认端口8080</li>
	</ul>

	<pre>http://localhost:8080/webmodel/app</pre>

	<h2 id="nav2">问题：编写html页面太麻烦</h2>
	<p>在Servlet中生成html页面本就是一件反人类的事情，html文档结构繁杂琐碎，大量的尖括号/双引号需要转义，</p>
	<p>大家可以阅读index.html的代码，想想把这样一个页面用println一行行写出来是啥感觉，如果再加上css和js代码，工作量会是海量的；</p>
	<p>另外一方面，术业有专攻，绝大部分网页设计人员是不懂编程的，大部分的程序员也不可能完全精通网页设计。</p>
	<h3>使用JSP技术专门编写HTML并加入少量动态内容</h3>
	<p>当我们把HTML的标记都剔除掉，会发现整个页面剩下的动态构建的数据其实没有想象的多，就如AppController生成的页面一样，有区别的地方就是生成时间。</p>
	<p></p>
</body>
</html>